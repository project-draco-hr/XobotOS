{
  try {
    if (this.isLoggable(record)) {
      if (this.writerNotInitialized) {
        initializeWriter();
      }
      String msg=null;
      try {
        msg=getFormatter().format(record);
      }
 catch (      Exception e) {
        getErrorManager().error("Exception occurred when formatting the log record",e,ErrorManager.FORMAT_FAILURE);
      }
      write(msg);
    }
  }
 catch (  Exception e) {
    getErrorManager().error("Exception occurred when logging the record",e,ErrorManager.GENERIC_FAILURE);
  }
}
