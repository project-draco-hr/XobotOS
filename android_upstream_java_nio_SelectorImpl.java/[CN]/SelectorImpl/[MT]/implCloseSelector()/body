{
  wakeup();
synchronized (this) {
synchronized (unmodifiableKeys) {
synchronized (selectedKeys) {
        IoUtils.close(wakeupIn);
        IoUtils.close(wakeupOut);
        doCancel();
        for (        SelectionKey sk : mutableKeys) {
          deregister((AbstractSelectionKey)sk);
        }
      }
    }
  }
}
