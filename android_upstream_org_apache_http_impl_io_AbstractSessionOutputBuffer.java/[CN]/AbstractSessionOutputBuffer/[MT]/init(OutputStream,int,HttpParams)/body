{
  if (outstream == null) {
    throw new IllegalArgumentException("Input stream may not be null");
  }
  if (buffersize <= 0) {
    throw new IllegalArgumentException("Buffer size may not be negative or zero");
  }
  if (params == null) {
    throw new IllegalArgumentException("HTTP parameters may not be null");
  }
  this.outstream=outstream;
  this.buffer=new ByteArrayBuffer(buffersize);
  this.charset=HttpProtocolParams.getHttpElementCharset(params);
  this.ascii=this.charset.equalsIgnoreCase(HTTP.US_ASCII) || this.charset.equalsIgnoreCase(HTTP.ASCII);
  this.metrics=new HttpTransportMetricsImpl();
}
