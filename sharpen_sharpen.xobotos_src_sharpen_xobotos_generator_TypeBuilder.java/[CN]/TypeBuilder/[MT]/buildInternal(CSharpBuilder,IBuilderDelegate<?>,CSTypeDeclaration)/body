{
  ITypeBuilderDelegate delegate=(ITypeBuilderDelegate)dlg;
  if (_template.isPartial())   type.partial(true);
  if (_template.isAbstract())   ((CSClass)type).modifier(CSClassModifier.Abstract);
  if (_template.isSealed())   ((CSClass)type).modifier(CSClassModifier.Sealed);
  delegate.mapMembers(type,this);
  if (getOutputMode() == OutputMode.SHARPEN) {
    if (!getASTNode().resolveBinding().isNested()) {
      CSAttribute attr=new CSAttribute("Sharpen.Sharpened");
      type.addAttribute(attr);
    }
  }
 else   if (getOutputMode() == OutputMode.STUB) {
    CSAttribute attr=new CSAttribute("Sharpen.Stub");
    type.addAttribute(attr);
  }
  if (getOutputType().removeStaticConstructor() && type.hasStaticConstructor()) {
    CSConstructor sctor=type.ensureStaticConstructor();
    stubBlock(sctor.body());
    sctor.setStub();
  }
  return true;
}
