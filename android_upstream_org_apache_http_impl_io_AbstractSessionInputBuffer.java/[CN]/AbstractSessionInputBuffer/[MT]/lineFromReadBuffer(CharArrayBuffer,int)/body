{
  int off=this.bufferpos;
  int len;
  this.bufferpos=pos + 1;
  if (pos > off && this.buffer[pos - 1] == HTTP.CR) {
    pos--;
  }
  len=pos - off;
  if (this.ascii) {
    charbuffer.append(this.buffer,off,len);
  }
 else {
    String s=new String(this.buffer,off,len,this.charset);
    charbuffer.append(s);
  }
  return len;
}
