{
  if (!sessionWasChanged) {
    if (logger != null) {
      logger.println("SSLRecordProtocol.setSession: Set pending session");
      logger.println("  cipher name: " + session.getCipherSuite());
    }
    this.session=session;
    pendingConnectionState=((version == null) || (version[1] == 1)) ? (ConnectionState)new ConnectionStateTLS(getSession()) : (ConnectionState)new ConnectionStateSSLv3(getSession());
    sessionWasChanged=true;
  }
 else {
    sessionWasChanged=false;
  }
}
