{
  if (status != END && status != INIT) {
    throw new IllegalStateException();
  }
  CoderResult result=implFlush(out);
  if (result == CoderResult.UNDERFLOW) {
    status=FLUSH;
  }
  return result;
}
