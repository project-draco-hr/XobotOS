{
  if (credentials == null) {
    throw new IllegalArgumentException("Credentials may not be null");
  }
  if (request == null) {
    throw new IllegalArgumentException("HTTP request may not be null");
  }
  String charset=AuthParams.getCredentialCharset(request.getParams());
  return authenticate(credentials,charset,isProxy());
}
