{
synchronized (lock) {
    checkNotClosed();
    Arrays.checkOffsetAndCount(buf.length,offset,len);
    if (len == 0) {
      return 0;
    }
    if (pos == this.count) {
      return -1;
    }
    int end=pos + len > this.count ? this.count : pos + len;
    str.getChars(pos,end,buf,offset);
    int read=end - pos;
    pos=end;
    return read;
  }
}
