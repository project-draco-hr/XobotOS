{
  for (; ; ) {
    int current=getState();
    int next=current + releases;
    if (next < current)     throw new Error("Maximum permit count exceeded");
    if (compareAndSetState(current,next))     return true;
  }
}
