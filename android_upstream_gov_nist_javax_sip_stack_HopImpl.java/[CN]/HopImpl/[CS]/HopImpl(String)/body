{
  if (hop == null)   throw new IllegalArgumentException("Null arg!");
  int brack=hop.indexOf(']');
  int colon=hop.indexOf(':',brack);
  int slash=hop.indexOf('/',colon);
  if (colon > 0) {
    this.host=hop.substring(0,colon);
    String portstr;
    if (slash > 0) {
      portstr=hop.substring(colon + 1,slash);
      this.transport=hop.substring(slash + 1);
    }
 else {
      portstr=hop.substring(colon + 1);
      this.transport="UDP";
    }
    try {
      port=Integer.parseInt(portstr);
    }
 catch (    NumberFormatException ex) {
      throw new IllegalArgumentException("Bad port spec");
    }
  }
 else {
    if (slash > 0) {
      this.host=hop.substring(0,slash);
      this.transport=hop.substring(slash + 1);
      this.port=transport.equalsIgnoreCase("TLS") ? 5061 : 5060;
    }
 else {
      this.host=hop;
      this.transport="UDP";
      this.port=5060;
    }
  }
  if (host == null || host.length() == 0)   throw new IllegalArgumentException("no host!");
  this.host=this.host.trim();
  this.transport=this.transport.trim();
  if ((brack > 0) && host.charAt(0) != '[') {
    throw new IllegalArgumentException("Bad IPv6 reference spec");
  }
  if (transport.compareToIgnoreCase("UDP") != 0 && transport.compareToIgnoreCase("TLS") != 0 && transport.compareToIgnoreCase("TCP") != 0) {
    System.err.println("Bad transport string " + transport);
    throw new IllegalArgumentException(hop);
  }
}
