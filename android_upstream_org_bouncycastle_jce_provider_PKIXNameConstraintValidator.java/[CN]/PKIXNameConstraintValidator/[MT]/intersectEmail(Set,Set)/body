{
  Set intersect=new HashSet();
  for (Iterator it=emails.iterator(); it.hasNext(); ) {
    String email=extractNameAsString(((GeneralSubtree)it.next()).getBase());
    if (permitted == null) {
      if (email != null) {
        intersect.add(email);
      }
    }
 else {
      Iterator it2=permitted.iterator();
      while (it2.hasNext()) {
        String _permitted=(String)it2.next();
        intersectEmail(email,_permitted,intersect);
      }
    }
  }
  return intersect;
}
