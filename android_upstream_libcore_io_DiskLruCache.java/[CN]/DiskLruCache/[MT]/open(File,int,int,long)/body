{
  if (maxSize <= 0) {
    throw new IllegalArgumentException("maxSize <= 0");
  }
  if (valueCount <= 0) {
    throw new IllegalArgumentException("valueCount <= 0");
  }
  DiskLruCache cache=new DiskLruCache(directory,appVersion,valueCount,maxSize);
  if (cache.journalFile.exists()) {
    try {
      cache.readJournal();
      cache.processJournal();
      cache.journalWriter=new BufferedWriter(new FileWriter(cache.journalFile,true));
      return cache;
    }
 catch (    IOException journalIsCorrupt) {
      System.logW("DiskLruCache " + directory + " is corrupt: "+ journalIsCorrupt.getMessage()+ ", removing");
      cache.delete();
    }
  }
  directory.mkdirs();
  cache=new DiskLruCache(directory,appVersion,valueCount,maxSize);
  cache.rebuildJournal();
  return cache;
}
