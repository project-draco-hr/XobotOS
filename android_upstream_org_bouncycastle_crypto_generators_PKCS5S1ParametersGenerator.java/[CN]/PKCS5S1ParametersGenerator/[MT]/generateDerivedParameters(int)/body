{
  keySize=keySize / 8;
  if (keySize > digest.getDigestSize()) {
    throw new IllegalArgumentException("Can't generate a derived key " + keySize + " bytes long.");
  }
  byte[] dKey=generateDerivedKey();
  return new KeyParameter(dKey,0,keySize);
}
