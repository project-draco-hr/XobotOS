{
  if (pos >= 0) {
    int cur=pos % BUFF_SIZE;
    if (cur < bar) {
      pos++;
      return buff[cur];
    }
    if (cur != end) {
      buff[cur]=inStream.read();
      bar=cur + 1;
      pos++;
      return buff[cur];
    }
 else {
      pos=-1;
    }
  }
  return inStream.read();
}
