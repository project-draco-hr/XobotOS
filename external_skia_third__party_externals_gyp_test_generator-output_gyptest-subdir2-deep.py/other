'\nVerifies building a target from a .gyp file a few subdirectories\ndeep when the --generator-output= option is used to put the build\nconfiguration files in a separate directory tree.\n'
import TestGyp
test = TestGyp.TestGyp(formats=['!ninja'])
test.writable(test.workpath('src'), False)
test.writable(test.workpath('src/subdir2/deeper/build'), True)
test.run_gyp('deeper.gyp', '-Dset_symroot=1', ('--generator-output=' + test.workpath('gypfiles')), chdir='src/subdir2/deeper')
test.build('deeper.gyp', test.ALL, chdir='gypfiles')
chdir = 'gypfiles'
if (test.format == 'xcode'):
    chdir = 'src/subdir2/deeper'
test.run_built_executable('deeper', chdir=chdir, stdout='Hello from deeper.c\n')
test.pass_test()
